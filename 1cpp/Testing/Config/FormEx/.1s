// ==========  ==========  ==========  ==========  ==========  ==========  ==========  
//
// TODO не меняем размер формы !! и местоположение кнопки КнопкаЛевоВерх !!
//
// ==========  ==========  ==========  ==========  ==========  ==========  ==========  

Перем Переменная;
Перем гЖурнал; // : ЖурналВызоваМетодов

Перем гСтруктура; 

Функция Конт(Конт) Возврат Конт; КонецФункции

Процедура Выполнить()
	Переменная = "Выполнить";	
	
КонецПроцедуры

Процедура ПроцедураВыполнить()
	Переменная = "ПроцедураВыполнить";
                           
	//Сообщить("Форма::ПроцедураВыполнить");
	гЖурнал.ДобавитьЗапись("Форма::ПроцедураВыполнить");
КонецПроцедуры

Функция ФункцияВыполнить()
	Переменная = "ФункцияВыполнить";	

	//Сообщить("Форма::ФункцияВыполнить");
	гЖурнал.ДобавитьЗапись("Форма::ФункцияВыполнить");

	Возврат Переменная;
КонецФункции	// МетодВыполнить

Процедура ПроцедураСНесколькимиПараметрамиВыполнить(Парам1, Парам2 = "Парам2")
	Переменная = "ПроцедураСНесколькимиПараметрамиВыполнить";
                           
	//Сообщить("Форма::ПроцедураСНесколькимиПараметрамиВыполнить");
	гЖурнал.ДобавитьЗапись("Форма::ПроцедураСНесколькимиПараметрамиВыполнить("+Парам1+","+Парам2+")");
КонецПроцедуры

Функция ФункцияСНесколькимиПараметрамиВыполнить(Парам1, Парам2 = "Парам2")
	Переменная = "ФункцияСНесколькимиПараметрамиВыполнить";	

	//Сообщить("Форма::ФункцияСНесколькимиПараметрамиВыполнить");
	гЖурнал.ДобавитьЗапись("Форма::ФункцияСНесколькимиПараметрамиВыполнить("+Парам1+","+Парам2+")");

	Возврат Переменная;
КонецФункции	// МетодВыполнить

Процедура ПриЗакрытии()
	Переменная = "Закрыть";	
	Форма.Параметр = Переменная;
КонецПроцедуры	// ПриЗакрытии

Функция статикТекст()
	//Возврат "статикТекст";
	Возврат "статикТекст";
КонецФункции	// Текст 
                 
Функция ВернутьТожеСамое(Значение)
	Возврат Значение;
КонецФункции

Функция ПолучитьДанныеКоординат()
	лСтруктура = СоздатьОбъект("Структура");
	
	лСтруктураФормы = СоздатьОбъект("Структура");
	
	КонтФормы = ВернутьТожеСамое(Контекст);
	РасширениеФормы = СоздатьОбъект("РасширениеФормы");
	РасширениеФормы.УстановитьФорму(КонтФормы.Форма);
	
	лСтруктураФормы.Вставить("Верх", РасширениеФормы.Верх);
	лСтруктураФормы.Вставить("Лево", РасширениеФормы.Лево);
	лСтруктураФормы.Вставить("Высота", РасширениеФормы.Высота);
	лСтруктураФормы.Вставить("Ширина", РасширениеФормы.Ширина);
	лСтруктураФормы.Вставить("Максимизирована", РасширениеФормы.Максимизирована);

	лСтруктура.Вставить("Форма", лСтруктураФормы);
	                                      
	Попытка
		лАтрибут = РасширениеФормы.ПолучитьАтрибут("КнопкаЛевоВерх");
	Исключение
		Возврат лСтруктура;
	КонецПопытки;
	
	// лАтрибут // : АтрибутФормы
	
	лСтруктураАтрибута = СоздатьОбъект("Структура");
	Верх = 0; Лево = 0; Высота = 0; Ширина = 0;
	лАтрибут.ПолучитьКоординаты(Лево, Верх, Ширина, Высота);
	лСтруктураАтрибута.Вставить("Верх", Верх);
	лСтруктураАтрибута.Вставить("Лево", Лево);
	лСтруктураАтрибута.Вставить("Высота", Высота);
	лСтруктураАтрибута.Вставить("Ширина", Ширина);
	лСтруктураАтрибута.Вставить("Максимизирована", 0);

	лСтруктура.Вставить("КнопкаЛевоВерх", лСтруктураАтрибута);
	
	Возврат лСтруктура;
КонецФункции

Процедура ПриВыбореЗакладки(НомерЗакладки, ЗначениеЗакладки)
	Сообщить("НомерЗакладки = <"+НомерЗакладки+">");
	Сообщить("ЗначениеЗакладки = <"+ЗначениеЗакладки+">");

КонецПроцедуры // ПриВыбореЗакладки 

//============================================================
Процедура ПриОткрытии()
	РасширениеФормы = СоздатьОбъект("РасширениеФормы");
	//РасширениеФормы.УстановитьФорму(Форма);
	Форма1 = РасширениеФормы.ПолучитьФорму(); // проверка поведения автоматической установки формы
//Сообщить("Форма.Параметр = <"+Форма.Параметр+">");
	                                          
	Если ТипЗначенияСтр(Форма.Параметр) = "ЖурналВызоваМетодов" Тогда
		гЖурнал = Форма.Параметр;
	Иначе
		гЖурнал = СоздатьОбъект("ЖурналВызоваМетодов");
	КонецЕсли;
	
	//Форма.Параметр = Конт(Контекст);
	Форма.Параметр = Форма1;
//Сообщить("ТипЗначенияСтр(1) "+Форма1);	
//Сообщить("АктивныйЭлемент() "+Форма1.АктивныйЭлемент());	
//Сообщить("Заголовок "+Форма1.Заголовок());	
    
	гСтруктура = СоздатьОбъект("Структура");
//Сообщить("ПриОткрытии = ");	
	гСтруктура.Вставить("ПриОткрытии", ПолучитьДанныеКоординат());

	Форма.ИспользоватьЗакладки(1);
	Форма.Закладки.ДобавитьЗначение("Основной");
	Форма.Закладки.ДобавитьЗначение("Слой1");
	//Форма.Обновить();
	//гСтруктура.Вставить("ПриОткрытииСЗакладками", ПолучитьДанныеКоординат());

	//Форма.ИспользоватьСлой("Основной,Слой1", 2);
	Форма.ИспользоватьСлой(Форма.Закладки.ПолучитьЗначение(1), 2);
	//Форма.Обновить();
	гСтруктура.Вставить("ПриОткрытииСоСлоями", ПолучитьДанныеКоординат());
КонецПроцедуры

	Процедура ПроверитьСтруктуруКоординат(СтруктураКоординат, НаименованиеСвойства) Экспорт
		//Сам = Сам();
		лСтруктура = 0;
		СтруктураКоординат.Свойство(НаименованиеСвойства, лСтруктура);
		//Сам.ПроверитьТипЗначения(лСтруктура, "Структура");
		// лСтруктура // : Структура  
		
	Сообщить("НаименованиеСвойства = <"+НаименованиеСвойства+">");
	
	Сообщить("	Форма");	
		лСтруктураФормы = 0;
		лСтруктура.Свойство("Форма", лСтруктураФормы);
		Лево = лСтруктураФормы.Лево;
		Верх = лСтруктураФормы.Верх;
		Высота = лСтруктураФормы.Высота;
		Ширина = лСтруктураФормы.Ширина;
		Максимизирована = лСтруктураФормы.Максимизирована;
	Сообщить("		Лево = <"+Лево+">");
	Сообщить("		Верх = <"+Верх+">");
	Сообщить("		Высота = <"+Высота+">");
	Сообщить("		Ширина = <"+Ширина+">");
	Сообщить("		Максимизирована = <"+Максимизирована+">");
		
	Сообщить("	КнопкаЛевоВерх");	
		лСтруктураФормы = 0;
		лСтруктура.Свойство("КнопкаЛевоВерх", лСтруктураФормы);
		Лево = лСтруктураФормы.Лево;
		Верх = лСтруктураФормы.Верх;
		Высота = лСтруктураФормы.Высота;
		Ширина = лСтруктураФормы.Ширина;
		Максимизирована = лСтруктураФормы.Максимизирована;
	Сообщить("		Лево = <"+Лево+">");
	Сообщить("		Верх = <"+Верх+">");
	Сообщить("		Высота = <"+Высота+">");
	Сообщить("		Ширина = <"+Ширина+">");
	Сообщить("		Максимизирована = <"+Максимизирована+">");
	
	
	КонецПроцедуры
	
	//	для проверки на разных версиях ФормЕкс
	Процедура Тест_ПолучениеКоординатДляРасширенияИАтрибутаФормы(СтруктураКоординат) Экспорт
	                  
		МетаИнфо = СоздатьОбъект("MetaInfoClasses");
		ВерсияСтрокой = МетаИнфо.ПолучитьВерсиюФайла(КаталогПрограммы()+"formex.dll", "FileVersion");
	Сообщить("ВерсияСтрокой = <"+ВерсияСтрокой+">");
		
		ПроверитьСтруктуруКоординат(СтруктураКоординат, "ПриОткрытии");
		//ПроверитьСтруктуруКоординат(СтруктураКоординат, "ПриОткрытииСЗакладками");
		ПроверитьСтруктуруКоординат(СтруктураКоординат, "ПриОткрытииСоСлоями");
		ПроверитьСтруктуруКоординат(СтруктураКоординат, "ПослеСозданияФормы");
		ПроверитьСтруктуруКоординат(СтруктураКоординат, "ПослеОткрытия");
	КонецПроцедуры

Процедура ПослеОткрытия()
	гЖурнал.ДобавитьЗапись("Форма::ПослеОткрытия");

	фКоличествоНажатийКлавиатуры = 0;

//Сообщить("ПослеОткрытия = ");	
	гСтруктура.Вставить("ПослеОткрытия", ПолучитьДанныеКоординат());

	//	для проверки на разных версиях ФормЕкс
	//Тест_ПолучениеКоординатДляРасширенияИАтрибутаФормы(гСтруктура);

//	КонтФормы = ВернутьТожеСамое(Контекст);
//	РасширениеФормы = СоздатьОбъект("РасширениеФормы");
//	РасширениеФормы.УстановитьФорму(КонтФормы.Форма);
//	Дескриптор = РасширениеФормы.Дескриптор;
//Сообщить("Дескриптор = <"+Дескриптор+">");	
	
КонецПроцедуры

Процедура ПослеСозданияФормы() Экспорт
//Сообщить("ПослеСозданияФормы = ");	
	гСтруктура.Вставить("ПослеСозданияФормы", ПолучитьДанныеКоординат());
	
	//КонтФормы = ВернутьТожеСамое(Контекст);
	//РасширениеФормы = СоздатьОбъект("РасширениеФормы");
	//РасширениеФормы.УстановитьФорму(КонтФормы.Форма);
	//РасширениеФормы.Максимизирована = 1;
	
КонецПроцедуры

Процедура ПослеЗакрытия()
	гЖурнал.ДобавитьЗапись("Форма::ПослеЗакрытия");
КонецПроцедуры
