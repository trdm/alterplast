//Автор:  Alex_Bob 
//E-mail: asbobylk@svsokol.lipetsk.ru
//Версия модуля: 1.00 от 29.06.2004
//Релиз платформы: позже 09.06.2004

Перем ЗапросБД Экспорт;
Перем ИмяТаблицы  Экспорт;
Перем МассивРеквизитов Экспорт;
Перем МассивИмен Экспорт;
Перем СоответствияПолей Экспорт;
Перем БылаИнициализация Экспорт;

//******************************************************************************************
//Предопределенные процедуры и функции в режиме Предприятия
//******************************************************************************************

Процедура ПриНачалеРаботыСистемы()
	
	ГМ=СоздатьОбъект("ГлавноеМеню");
	Если ГМ.КоличествоЭлементов()=0 Тогда
	    Интерфейс=СоздатьОбъект("Интерфейсы");
        Если Интерфейс.КоличествоЭлементов()>0 Тогда
        	Интерфейс.ВыбратьЭлементы();
        	Интерфейс.ПолучитьЭлемент();
        	АдмИнтерфейс=Интерфейс.ИД; 
        Иначе
            Интерфейс.Новый();
	    	Интерфейс.ИД=0x100000000*Интерфейс.НомерТаблицыОбъекта()+1;;
	    	Интерфейс.Имя="Администратор";
        	Интерфейс.Записать(); 	
        	АдмИнтерфейс=Интерфейс.ИД;
        КонецЕсли;
        ГМ.Новый();
        ГМ.ИД=0x100000000*ГМ.НомерТаблицыОбъекта()+1;
        Родитель=ГМ.ИД;
        ГМ.Интерфейс=АдмИнтерфейс;
        ГМ.Заголовок="Администрирование";
        ГМ.Родитель=0;
        ГМ.Позиция=1;
        ГМ.Команда="";
        ГМ.Параметр="";
        ГМ.Записать();
        ГМ.Новый();
        ГМ.ИД=0x100000000*ГМ.НомерТаблицыОбъекта()+2;
        ГМ.Интерфейс=АдмИнтерфейс;
        ГМ.Заголовок="Пользователи";
        ГМ.Родитель=Родитель;
        ГМ.Позиция=2;
        ГМ.Команда="Объекты\Пользователи\Формы\СписокПользователей";
        ГМ.Параметр="";
        ГМ.Записать();
        ГМ.Новый();
        ГМ.ИД=0x100000000*ГМ.НомерТаблицыОбъекта()+3;
        ГМ.Интерфейс=АдмИнтерфейс;
        ГМ.Заголовок="Наборы прав";
        ГМ.Родитель=Родитель;
        ГМ.Позиция=1;
        ГМ.Команда="Объекты\НаборыПрав\Формы\СписокНаборовПрав";
        ГМ.Параметр="";
        ГМ.Записать();
        ГМ.Новый();
        ГМ.ИД=0x100000000*ГМ.НомерТаблицыОбъекта()+4;
        ГМ.Интерфейс=АдмИнтерфейс;
        ГМ.Заголовок="Интерфейсы";
        ГМ.Родитель=Родитель;
        ГМ.Позиция=3;
        ГМ.Команда="Объекты\Интерфейсы\Формы\СписокИнтерфейсов";
        ГМ.Параметр="";
        ГМ.Записать();
    КонецЕсли;    
КонецПроцедуры

Процедура ПриЗавершенииРаботыСистемы()

КонецПроцедуры 

Процедура НачальнаяИнициализация()Экспорт
	БылаИнициализация=1;

	ИмяТаблицы="mainmenu";

	ТаблицаБД=СоздатьОбъект("ТаблицаБД");
	
	ТаблицаБД.ДобавитьПоле("ИД","Число",20,0);
	ТаблицаБД.ДобавитьПоле("Родитель","Число",20,0);
	ТаблицаБД.ДобавитьПоле("Позиция","Число",20,0);
	ТаблицаБД.ДобавитьПоле("Заголовок","Строка",100,0);
	ТаблицаБД.ДобавитьПоле("Объект","Строка",200,0);
	ТаблицаБД.ДобавитьПоле("Команда","Строка",200,0);
	ТаблицаБД.ДобавитьПоле("Параметр","Строка",200,0);
	ТаблицаБД.ДобавитьПоле("Модальность","Число",1,0);	
	ТаблицаБД.ДобавитьПоле("Интерфейс","Число",20,0);
	ТаблицаБД.НачальнаяИнициализация("ГлавноеМеню",ИмяТаблицы,2,0);
	
КонецПроцедуры

//******************************************************************************************
//Предопределенные процедуры и функции в режиме Конфигуратора
//******************************************************************************************
Процедура ПриНачалеРаботыКонфигуратора()

КонецПроцедуры 


Процедура ПриЗавершенииРаботыКонфигуратора()

КонецПроцедуры 


